<header class="fixed inset-x-0 top-0 z-[100] bg-white/95 backdrop-blur-sm shadow-sm">
  <nav aria-label="Global" class="flex justify-between items-center px-4 mx-auto max-w-7xl h-20 lg:px-8">
    <div class="flex items-center h-full lg:flex-1">
      <a href="/" class="flex items-center h-full">
        <span class="sr-only">Dubois Services</span>
        <img src="/images/cropped-Logo-Dubois-Service.png" alt="" class="object-contain h-full aspect-square" />
      </a>
    </div>
    <div class="flex gap-2 items-center py-4 lg:hidden">
      <a href="/devis" class="inline-flex justify-center items-center p-2 text-white bg-amber-700 rounded-md transition-colors hover:bg-amber-800" aria-label="Devis gratuit">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="w-5 h-5">
          <path d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      </a>
      <a href="tel:<%= company_phone_formatted %>" class="inline-flex justify-center items-center p-2 text-white bg-green-700 rounded-md transition-colors hover:bg-green-800" aria-label="Appeler">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="w-5 h-5">
          <path d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      </a>
      <button type="button" id="mobile-menu-button" class="inline-flex justify-center items-center p-2.5 -m-2.5 text-gray-700 rounded-md">
        <span class="sr-only">Ouvrir le menu</span>
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="w-6 h-6">
          <path d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      </button>
    </div>
    <div class="hidden py-4 lg:flex lg:gap-x-8 lg:items-center">
      <a href="<%= elagage_path %>" class="text-base font-semibold transition-colors <%= current_page?(elagage_path) ? 'text-green-700' : 'text-gray-900 hover:text-green-700' %>">Élagage</a>
      <a href="<%= abattage_path %>" class="text-base font-semibold transition-colors <%= current_page?(abattage_path) ? 'text-green-700' : 'text-gray-900 hover:text-green-700' %>">Abattage</a>
      <a href="<%= dessouchage_path %>" class="text-base font-semibold transition-colors <%= current_page?(dessouchage_path) ? 'text-green-700' : 'text-gray-900 hover:text-green-700' %>">Dessouchage</a>
      <a href="<%= entretien_path %>" class="text-base font-semibold transition-colors <%= current_page?(entretien_path) ? 'text-green-700' : 'text-gray-900 hover:text-green-700' %>">Entretien</a>
      <a href="/#faq" class="text-base font-semibold text-gray-900 transition-colors hover:text-green-700">FAQ</a>
      <a href="tel:<%= company_phone_formatted %>" class="px-4 py-2 text-base font-semibold text-white bg-green-700 rounded-md transition-colors hover:bg-green-800"><%= company_phone %></a>
      <a href="/devis" class="px-4 py-2 text-base font-semibold text-white bg-amber-700 rounded-md transition-colors hover:bg-amber-800">Devis gratuit</a>
    </div>
  </nav>
</header>

<!-- Menu mobile (en dehors du header pour un z-index indépendant) -->
<div id="mobile-menu" class="hidden lg:hidden fixed inset-0 z-[9999] bg-white">
  <div class="flex flex-col h-full">
    <div class="flex justify-between items-center p-4 border-b">
      <img src="/images/cropped-Logo-Dubois-Service.png" alt="" class="w-auto h-12" />
      <button type="button" id="mobile-menu-close" class="p-2 text-gray-700" aria-label="Fermer le menu">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="w-6 h-6" aria-hidden="true">
          <path d="M6 18 18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      </button>
    </div>
    <div class="overflow-y-auto flex-1 p-4 space-y-4">
      <a href="<%= elagage_path %>" class="block py-2 font-semibold transition-colors <%= current_page?(elagage_path) ? 'text-green-700' : 'text-gray-900 hover:text-green-700' %>">Élagage</a>
      <a href="<%= abattage_path %>" class="block py-2 font-semibold transition-colors <%= current_page?(abattage_path) ? 'text-green-700' : 'text-gray-900 hover:text-green-700' %>">Abattage</a>
      <a href="<%= dessouchage_path %>" class="block py-2 font-semibold transition-colors <%= current_page?(dessouchage_path) ? 'text-green-700' : 'text-gray-900 hover:text-green-700' %>">Dessouchage</a>
      <a href="<%= entretien_path %>" class="block py-2 font-semibold transition-colors <%= current_page?(entretien_path) ? 'text-green-700' : 'text-gray-900 hover:text-green-700' %>">Entretien</a>
      <div class="pt-2 space-y-2 border-t">
        <p class="mb-2 text-xs font-semibold tracking-wider text-gray-500 uppercase">Navigation</p>
        <a href="/#services" class="block py-2 text-gray-700 hover:text-green-700">Nos Services</a>
        <a href="/#expertise" class="block py-2 text-gray-700 hover:text-green-700">Pourquoi Nous</a>
        <a href="/#galerie" class="block py-2 text-gray-700 hover:text-green-700">Galerie</a>
        <a href="/#faq" class="block py-2 text-gray-700 hover:text-green-700">FAQ</a>
      </div>
      <div class="pt-4 space-y-3 border-t">
        <a href="tel:<%= company_phone_formatted %>" class="block px-4 py-3 font-semibold text-center text-white bg-green-700 rounded-md hover:bg-green-800"><%= company_phone %></a>
        <a href="/devis" class="block px-4 py-3 font-semibold text-center text-white bg-amber-700 rounded-md hover:bg-amber-800">Devis gratuit</a>
      </div>
    </div>
  </div>
</div>

<%= javascript_import_module_tag "mobile_menu" %>
